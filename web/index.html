<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:;base64,iVBORw0KGgo="/> <!-- Fake favicon to stop requests -->
  <title>Pulse Duplicator Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.3/themes/base/jquery-ui.min.css">
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript" src="/eel.js"></script>
	<!--  main.js imported at the bottom  -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.3/jquery-ui.min.js"></script>
</head>

<body>
  <div class="topnav">
    <a id="manual-btn" onclick="App.change_mode('manual')">Manual testing</a>
    <a id="waveform-btn" onclick="App.change_mode('waveform')">Waveform manager</a>
  </div>

  <!--                            -->
  <!--  MANUAL TESTING INTERFACE  --> 
  <!--                            -->
  <div id="manual">
    <h2>Manual testing</h2>
    <p class="input-container">
      Open inflow valve 
      <span>
        <input type="range" min="0" max="100" id="inflow_r" 
          oninput="pubsub.publish('inflow', this.value)" />
        <input type="number" min="0" max="100" id="inflow_n" 
          oninput="pubsub.publish('inflow', this.value)" />
      </span>
    </p>
    <p class="input-container">
      Open outflow valve
      <span>
        <input type="range" min="0" max="100" id="outflow_r"
          oninput="pubsub.publish('outflow', this.value)" />
        <input type="number" min="0" max="100" id="outflow_n"
          oninput="pubsub.publish('outflow', this.value)" />
      </span>
    </p>
    <button onclick="toggle_LED('red')"> Toggle LED 1</button>
    <button onclick="toggle_LED('blue')"> Toggle LED 2</button>
  </div>

  <!--                             -->
  <!--  WAVEFORM TESTING INTERFACE -->
  <!--                             -->
  <div id="waveform" style="display: none;">

    <h2>Waveform manager</h2>
    
    <div class="flex-container" style="justify-content: space-between">

      <!--  Container for all rate and period inputs -->
      <div id="rate-and-period">
  
        <!--  Heart rate (bpm) input -->
        <p class="input-container">
          <label>Heart rate (bpm):</label>
          <span>
            <span class="range-labels">
              <input type="range" min="30" max="200" id="bpm_r" />
              <label class="min">30</label>
              <label class="max">200</label>
            </span>
            <input type="number" min="30" max="200" id="bpm_n" />
      		  <span class="unit">beats / min</span>
          </span>
        </p>

        <!--  Heart rate (Hz)  -->
        <p class="input-container">
          <label>Heart rate (Hz): </label>
          <span>
            <span class="range-labels">
              <input type="range" min="0.5" max="3.33" step="0.01" id="hz_r" />
              <label class="min">0.50</label>
              <label class="max">3.33</label>
            </span>
            <input type="number" min="0.67" max="1.67" step="0.01" id="hz_n" />
         		<span class="unit">beats / sec</span?
          </span>
        </p>

        <!--  Heart rate period (s)  -->
        <p class="input-container">
          <label>Period:</label>
          <span>
            <span class="range-labels">
              <input type="range" min="0.3" max="2" step="0.01" id="period_r" />
              <label class="min">0.3</label>
              <label class="max">2</label>
            </span>
            <input type="number" min="0.3" max="2" step="0.01" id="period_n" />
        		<span class="unit">seconds</span>
          </span>
        </p>

      </div> <!--  End rate and period container -->
  
      <!--  Container for pressures -->
      <div id="pressures">
        
        <div class="input-container" style="width:250px;">
          <label>Diastole and systole:</label>  
          <div class="range-labels">
            <div id="pressure-range"></div>
            <label class="min">30</label>
            <label class="max">210</label>
          </div>
        </div>

        <div class="input-container">
          <label>Diastole:</label>
          <input type="number" min="60" max="110" value="80" id="diastole_n" />
          <label>mmHg</label>
        </div>

        <div class="input-container">
          <label>Systole:</label>
          <input type="number" min="90" max="210" value="120" id="systole_n" />
          <label>mmHg</label>
        </div>
        <!--  Diastole pressure input ->
        <p class="input-container">
          <label>Diastole pressure:</label>
          <span>
            <span class="range-labels">
              <input type="range" min="60" max="110" id="diastole_r" />
              <label class="min">60</label>
              <label class="max" id="diastole_max">120</label>
            </span>
            <input type="number" min="60" max="110" id="diastole_n" />
        		<span class="unit">mmHg</span>
          </span>
        </p>

        <!--  Systole pressure input  ->
        <p class="input-container">
          <label>Systole pressure:</label>
          <span>
            <span class="range-labels">
              <input type="range" min="90" max="210" id="systole_r" />
              <label class="min" id="systole_min">9.0</label>
              <label class="max">210</label>
            </span>
            <input type="number" min="90" max="210" id="systole_n" />
		        <span class="unit">mmHg</span>
          </span>
        </p>-->

      </div>  <!--  End pressure container  -->
    </div> <!--  End flex container  -->

    <!--  Button to toggle pulse  -->
    <div id="pulse-btns">
      <button id="start-pulse"> &#9654; Start pulse</button>
      <button id="stop-pulse" style="display:none;"> &#9208; Stop pulse</button>
    </div>

    <!--  Waveform graph  -->
    <div id="graph-container">
      <canvas id="pulse-graph"></canvas>
    </div>      

  <div>
</body>

<script src="main.js" type="module"></script>
</html>
